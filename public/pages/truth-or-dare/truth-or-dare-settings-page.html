<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRUTH OR DARE SETTINGS</title>
    <link rel="stylesheet" href="header.css">
    <link rel="stylesheet" href="gamemode-settings-page-styles.css">
    <link rel="stylesheet" href="warning-message-style.css">
    <link rel="stylesheet" href="settings-style.css">
    <link rel="stylesheet" href="rotate-device.css">

    <link rel="icon" type="image/png" sizes="15x16" href="./images/favicons/blue/favicon-16x16.png">
    <link rel="icon" type="image/png" sizes="30x32" href="./images/favicons/blue/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="45x48" href="./images/favicons/blue/favicon-48x48.png">
    <link rel="icon" type="image/png" sizes="60x64" href="./images/favicons/blue/favicon-64x64.png">
    <link rel="icon" type="image/png" sizes="89x96" href="./images/favicons/blue/favicon-96x96.png">
    <link rel="icon" type="image/png" sizes="128x128" href="./images/favicons/blue/favicon-128x128.png">
    <link rel="icon" type="image/png" sizes="238x256" href="./images/favicons/blue/favicon-256x256.png">
    <link rel="icon" type="image/png" sizes="476x512" href="./images/favicons/blue/favicon-512x512.png">
    <link rel="apple-touch-icon" sizes="53x57" href="./images/favicons/blue/favicon-57x57.png">
    <link rel="apple-touch-icon" sizes="67x72" href="./images/favicons/blue/favicon-72x72.png">
    <link rel="apple-touch-icon" sizes="106x114" href="./images/favicons/blue/favicon-114x114.png">
    <link rel="apple-touch-icon" sizes="112x120" href="./images/favicons/blue/favicon-120x120.png">
    <link rel="apple-touch-icon" sizes="134x144" href="./images/favicons/blue/favicon-144x144.png">
    <link rel="apple-touch-icon" sizes="141x152" href="./images/favicons/blue/favicon-152x152.png">
    <link rel="apple-touch-icon" sizes="167x180" href="./images/favicons/blue/favicon-180x180.png">
    <meta name="msapplication-TileImage" content="./images/favicons/blue/favicon-144x144.png">
    <meta name="msapplication-TileColor" content="#202020">
    <meta name="msapplication-square70x70logo" content="./images/favicons/blue/favicon-70x70.png">
    <meta name="msapplication-square150x150logo" content="./images/favicons/blue/favicon-150x150.png">
    <meta name="msapplication-square310x310logo" content="./images/favicons/blue/favicon-310x310.png">
    <link rel="icon" type="image/png" sizes="179x192" href="./images/favicons/blue/favicon-192x192.png">
    <link rel="icon" type="image/png" sizes="512x512" href="./images/favicons/blue/favicon-512x512.png">
    <style>
        .landscape-message {
            color: var(--primarypagecolour);
        }

        @media (max-width: 768px) and (orientation: landscape) {

            .main-container,
            .header,
            .home-button-container {
                display: none;
            }

            .warning-box,
            .overlay {
                display: none !important;
            }
        }
    </style>
</head>

<body>
    <header class="header" id="header">
        <div class="logo-container">
            <a href="/">
                <img src="./Images/logo.svg" alt="OverExposed Logo" class="logo">
            </a>
        </div>
        <div class="settings-icon">
            <img src="./images/icons/settings.svg" alt="Settings">
        </div>
        <div class="extra-menu-icon">
            <img src="./Images/Icons/extra-menu-icon.svg" alt="Extra Menu">
        </div>
    </header>
    <div class="landscape-message">
        Please rotate your phone to continue
        <img src="../../images/icons/blue/rotate-phone-icon.svg" alt="Rotate Icon" class="rotate-icon">
    </div>
    <div class="overlay" id="overlay"></div>
    <div class="warning-box" id="warning-box">
        <h2 id="warning-title" class="warning-title">NSFW</h2>
        <img src="../../images/icons/warning-icon.svg" alt="Warning Image" class="warning-image">
        <p class="warning-text">This content is not suitable for all audiences.</p>
        <a href="truth-or-dare" class="start-game-warning-button">START GAME</a>
    </div>
    <div class="home-button-container">
        <button class="home-button">HOME</button>
    </div>
    <div class="main-container">
        <div class="packs-container">
            <div class="packs-header-container">
                <h2 class="packs-header">Truth or Dare Packs</h2>
            </div>
            <div class="packs-content-container">
                <div class="button-container">
                    <button data-key="truth-or-dare-ice-breaker" class="pack-sfw">ICE BREAKER !</button>
                    <button data-key="truth-or-dare-cheeky-confessions" class="pack-sfw">CHEEKY CONFESSIONS !!</button>
                    <button data-key="truth-or-dare-troubled-teens" class="pack-nsfw">TROUBLED TEENS !!!</button>
                    <button data-key="truth-or-dare-adult-confessions" class="pack-nsfw">ADULT CONFESSIONS !!!!</button>
                    <button data-key="truth-or-dare-risky-revelations" class="pack-nsfw">RISKY REVELATIONS
                        !!!!!</button>
                </div>
            </div>
        </div>
        <div class="separator-container"></div>
        <div class="settings-container">
            <div class="settings-header-container">
                <h2 class="settings-header">Game Settings</h2>
            </div>
            <div class="game-settings-container">
                <div class="button-container">
                    <button data-key="truth-or-dare-settings-punishment">Drinking Punishment</button>
                </div>
                <button class="start-game-button">Start Game</button>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.documentElement.style.setProperty('--primarypagecolour', '#66CCFF');
            document.documentElement.style.setProperty('--secondarypagecolour', '#55aaff');

            const overlay = document.getElementById('overlay');

            const eighteenPlusEnabled = localStorage.getItem('settings-nsfw') === 'true';
            const packButtons = document.querySelectorAll('.packs-container .button-container button');
            const drinkingPunishmentButton = document.querySelector('[data-key="truth-or-dare-settings-punishment"]');
            const startGameButton = document.querySelector('.start-game-button');
            const warningBox = document.getElementById('warning-box');
            const warningStartButton = document.querySelector('.start-game-warning-button');

            function updateStartGameButton() {
                const anyActive = Array.from(packButtons).some(button => button.classList.contains('active'));
                startGameButton.classList.toggle('disabled', !anyActive);
                startGameButton.style.pointerEvents = anyActive ? 'auto' : 'none';
            }

            if (!eighteenPlusEnabled) {
                for (let i = 2; i < packButtons.length; i++) {
                    packButtons[i].disabled = true;
                    packButtons[i].classList.add('disabled');

                    const key = packButtons[i].getAttribute('data-key');
                    localStorage.setItem(key, 'false');
                }
                drinkingPunishmentButton.disabled = true;
                drinkingPunishmentButton.classList.add('disabled');
                localStorage.setItem(drinkingPunishmentButton.getAttribute('data-key'), 'false');
            }

            document.querySelectorAll('button').forEach(button => {
                const key = button.getAttribute('data-key');
                const savedState = localStorage.getItem(key);

                if (savedState === 'true') {
                    button.classList.add('active');
                } else if (savedState === 'false') {
                    button.classList.remove('active');
                }

                button.addEventListener('click', () => {
                    if (!button.disabled) {
                        button.classList.toggle('active');
                        const isActive = button.classList.contains('active');
                        localStorage.setItem(key, isActive ? 'true' : 'false');
                        updateStartGameButton();
                    }
                });
            });

            function selectRandomPack() {
                const activePacks = Array.from(packButtons).filter(button => button.classList.contains('active'));
                if (activePacks.length === 0) return null;

                const randomIndex = Math.floor(Math.random() * activePacks.length);
                return activePacks[randomIndex];
            }

            document.querySelector('.home-button').addEventListener('click', () => {
                window.location.href = '/';
            });

            startGameButton.addEventListener('click', () => {
                const nsfwPacksActive = Array.from(packButtons).some(button => button.classList.contains('active') && button.classList.contains('pack-nsfw'));

                if (nsfwPacksActive) {
                    warningBox.style.display = 'block';
                    overlay.style.display = 'block';
                } else {
                    window.location.href = 'truth-or-dare';
                }
            });

            warningStartButton.addEventListener('click', () => {
                window.location.href = 'truth-or-dare';
            });

            warningBox.addEventListener('click', function (event) {
                if (event.target === this || event.target === overlay) {
                    this.style.display = 'none';
                    overlay.style.display = 'none';
                }
            });
            overlay.addEventListener('click', () => {
                warningBox.style.display = 'none';
                overlay.style.display = 'none';
            });
        });
    </script>
</body>

</html>